"use strict";(self.webpackChunkcake_shop=self.webpackChunkcake_shop||[]).push([[299],{9299:function(e,t,n){n.r(t),n.d(t,{default:function(){return h}});var s=n(4165),r=n(5861),a=n(9439),c=n(2791),o=n(3778),l=n(2835),i=n(3402),u=n(1243),d=n(184),p=function(e){var t=e.HandleSubmit,n=e.value,s=e.Setvalue;return localStorage.setItem("previousCategory",n),(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("form",{onSubmit:t,children:[(0,d.jsx)("div",{class:"mb-3",children:(0,d.jsx)("input",{type:"text",autoComplete:"off",className:"form-control py-3 fw-bolder",id:"exampleFormControlInput1",placeholder:"Enter new category",value:n,onChange:function(e){return s(e.target.value)}})}),(0,d.jsx)("div",{class:"mb-3",children:(0,d.jsx)("button",{type:"submit",className:"btn btn-primary ms-2 px-5  py-2",children:"submit"})})]})})},m=n(1202),h=function(){var e=(0,c.useState)([]),t=(0,a.Z)(e,2),n=t[0],h=t[1],x=(0,c.useState)(""),v=(0,a.Z)(x,2),f=v[0],g=v[1],j=(0,c.useState)(!1),Z=(0,a.Z)(j,2),b=Z[0],y=Z[1],w=(0,c.useState)(null),N=(0,a.Z)(w,2),S=N[0],k=N[1],E=(0,c.useState)(""),C=(0,a.Z)(E,2),P=C[0],D=C[1],_=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(){var t,n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.Z.get("/api/admin/category/get-category");case 3:t=e.sent,null!==(n=t.data)&&void 0!==n&&n.success&&(h(null===n||void 0===n?void 0:n.categories),i.ZP.success("categories accquired successfully")),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),i.ZP.error("cannot get categories");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(t){var n,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,u.Z.post("/api/admin/category/create-category",{name:f});case 4:n=e.sent,null!==(r=n.data)&&void 0!==r&&r.success?(i.ZP.success("".concat(f," is created")),_(),g(" ")):i.ZP.error(r.message),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),i.ZP.error("something went wrong");case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(t){var n,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,u.Z.put("/api/admin/category/update-category/".concat(S._id),{name:P});case 4:n=e.sent,null!==(r=n.data)&&void 0!==r&&r.success?(i.ZP.success("nice! choise,  ".concat(P,"  is updated ")),k(null),D(""),y(!1),_()):i.ZP.error(r.message),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),i.ZP.error("something went wrong");case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(t){var n,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"YES"!==window.prompt('are you sure to delete  this  category ,TYPE "YES" ')){e.next=8;break}return e.next=5,u.Z.delete("/api/admin/category/delete-category/".concat(t));case 5:n=e.sent,null!==(r=n.data)&&void 0!==r&&r.success?(i.ZP.success(" SELECTED CATEGORY IS DELETED SUCCESSFULLY "),_()):i.ZP.error(r.message);case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),i.ZP.error("something went wrong");case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();return(0,c.useEffect)((function(){_()}),[]),(0,d.jsxs)("div",{children:[(0,d.jsx)(l.Z,{}),(0,d.jsxs)("div",{className:"admin_main",children:[(0,d.jsx)("hr",{}),(0,d.jsxs)("div",{className:"d-flex row container-fluid p-3 ",children:[(0,d.jsx)("div",{className:"col-md-3",children:(0,d.jsx)(o.Z,{})}),(0,d.jsx)("div",{className:"col-md-9 ps-5  ",children:(0,d.jsxs)("div",{className:" p-3 w-85 ps-5 ",children:[(0,d.jsx)("h1",{className:"mb-3 text-uppercase  fw-bold   font-monospace",children:"manage categories"}),(0,d.jsx)("hr",{}),(0,d.jsx)("div",{className:"p-3 w-50",children:(0,d.jsx)(p,{HandleSubmit:Y,value:f,Setvalue:g})}),(0,d.jsx)("hr",{}),(0,d.jsx)("div",{className:"w-75",children:(0,d.jsxs)("table",{class:"table",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{scope:"col",className:"ps-4 ",children:"ID"}),(0,d.jsx)("th",{scope:"col",className:"ps-4 ",children:"Name"}),(0,d.jsxs)("th",{scope:"col",className:"ps-4 ",children:["Action"," "]})]})}),(0,d.jsx)("tbody",{children:n.map((function(e){return(0,d.jsxs)("tr",{className:"p-3 m-4",children:[(0,d.jsx)("td",{className:"p-3",children:e._id}),(0,d.jsx)("td",{className:"p-3 m-4 text-uppercase",children:e.name},e._id),(0,d.jsxs)("td",{className:"p-3",children:[(0,d.jsx)("button",{type:"button",className:"btn btn-primary m-1 ms-3",onClick:function(){y(!0),D(e.name),k(e)},children:"Edit"}),(0,d.jsx)("button",{type:"button",className:"btn btn-danger m-1 ms-3",onClick:function(){L(e._id)},children:"Delete"})]})]})}))})]})}),(0,d.jsx)(m.Z,{onCancel:function(){return y(!1)},footer:null,visible:b,children:(0,d.jsx)(p,{value:P,Setvalue:D,HandleSubmit:I})})]})})]})]})]})}}}]);
//# sourceMappingURL=299.a0a834d7.chunk.js.map