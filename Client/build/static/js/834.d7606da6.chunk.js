"use strict";(self.webpackChunkcake_shop=self.webpackChunkcake_shop||[]).push([[834],{7834:function(e,s,n){n.r(s);var c=n(4165),r=n(5861),t=n(9439),l=n(2791),a=n(3778),d=n(2835),i=n(2927),o=n(3402),u=n(2426),h=n.n(u),p=n(1243),x=n(6355),v=n(3388),j=n(184),m=v.Z.Option;s.default=function(){var e=(0,l.useState)([]),s=(0,t.Z)(e,2),n=s[0],u=s[1],f=(0,i.a)(),N=(0,t.Z)(f,1)[0],b=(0,l.useState)(["Not process","processing","Shipped","deliver","cancel"]),g=(0,t.Z)(b,2),w=g[0],Z=(g[1],function(){var e=(0,r.Z)((0,c.Z)().mark((function e(){var s,n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.Z.get("/api/auth/all-orders");case 3:s=e.sent,n=s.data,u(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}());(0,l.useEffect)((function(){null!==N&&void 0!==N&&N.token&&Z()}),[null===N||void 0===N?void 0:N.token]);var k=function(){var e=(0,r.Z)((0,c.Z)().mark((function e(s,n){var r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.Z.put("/api/auth/orders-status/".concat(s),{status:n});case 3:r=e.sent,r.data?(Z(),o.ZP.success("status updated successfully")):o.ZP.error("status not updated"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),o.ZP.error("something went wrong");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(s,n){return e.apply(this,arguments)}}();return(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("div",{children:[(0,j.jsx)(d.Z,{}),(0,j.jsxs)("div",{className:"admin_orders_main",children:[(0,j.jsx)("hr",{}),(0,j.jsxs)("div",{className:"d-flex row container-fluid p-3 ",children:[(0,j.jsx)("div",{className:"col-md-3",children:(0,j.jsx)(a.Z,{})}),(0,j.jsx)("div",{className:"col-md-9 ps-5  ",children:(0,j.jsxs)("div",{className:" p-3 w-75 ps-5 ",children:[(0,j.jsx)("h1",{className:"text-center text-uppercase font-monospace",children:"all orders"}),null===n||void 0===n?void 0:n.map((function(e,s){var n,c,r;return(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("div",{children:[(0,j.jsxs)("table",{className:"table",children:[(0,j.jsx)("thead",{children:(0,j.jsxs)("tr",{children:[(0,j.jsx)("th",{scope:"col",children:"SR NO"}),(0,j.jsx)("th",{scope:"col",children:"status"}),(0,j.jsx)("th",{scope:"col",children:"buyer ID"}),(0,j.jsx)("th",{scope:"col",children:"orders"}),(0,j.jsx)("th",{scope:"col",children:"quantity"}),(0,j.jsx)("th",{scope:"col",children:"payment"}),(0,j.jsx)("th",{scope:"col",children:"total"})]})}),(0,j.jsx)("tbody",{children:(0,j.jsxs)("tr",{children:[(0,j.jsx)("td",{children:s+1}),(0,j.jsx)("td",{children:(0,j.jsx)(v.Z,{bordered:!1,onChange:function(s){return k(e._id,s)},defaultValue:null===e||void 0===e?void 0:e.status,children:w.map((function(e,s){return(0,j.jsx)(m,{value:e,children:e},s)}))})}),(0,j.jsx)("td",{children:null===e||void 0===e||null===(n=e.buyer)||void 0===n?void 0:n._id}),(0,j.jsx)("td",{children:h()(null===e||void 0===e?void 0:e.createAt).fromNow()}),(0,j.jsx)("td",{children:null!==e&&void 0!==e&&e.payment.success?(0,j.jsx)("span",{className:"bg-success",children:"success"}):(0,j.jsx)("span",{className:"bg-danger ",children:"failed"})}),(0,j.jsx)("td",{children:null===e||void 0===e||null===(c=e.products)||void 0===c?void 0:c.length}),(0,j.jsxs)("td",{children:[" ",(0,j.jsx)(x.t9y,{className:"h6 mt-1"}),null===e||void 0===e?void 0:e.amount,"/-"]})]})})]}),(0,j.jsx)("div",{className:" container",children:null===e||void 0===e||null===(r=e.products)||void 0===r?void 0:r.map((function(e,s){return(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("div",{className:"row flex-row   mb-3 rounded-4",style:{boxShadow:"rgba(60, 64, 67, 0.3) 0px 1px 2px 0px, rgba(60, 64, 67, 0.15) 0px 1px 3px 1px"},children:[(0,j.jsx)("div",{className:"col-md-3 p-3",children:(0,j.jsx)("img",{src:"/api/admin/product/product-photo/".concat(e._id),className:"  rounded-2",alt:e.productName,height:70,width:70})}),(0,j.jsxs)("div",{className:"col-md-8 p-3",children:[(0,j.jsx)("h3",{className:"text-capitalize fw-bold font-monospace",children:e.productName}),(0,j.jsx)("hr",{}),(0,j.jsx)("div",{className:"d-flex flex-column flex-wrap ",children:(0,j.jsxs)("h4",{className:"fw-bold",children:[" ",(0,j.jsx)(x.t9y,{className:"h5 mt-1"}),e.price,"/-"]})})]})]})})}))})]})})})).reverse()]})})]})]}),(0,j.jsx)("br",{})]})})}}}]);
//# sourceMappingURL=834.d7606da6.chunk.js.map